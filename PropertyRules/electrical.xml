<?xml version="1.0" encoding="UTF-8"?>
<PropertyList>
    <!-- sources -->
    <filter>
        <type>gain</type>
        <gain>1</gain>
        <input>
            <condition>
                <property>controls/electric/battery-switch</property>
            </condition>
            <value>24.15</value>
        </input>
        <output>systems/electrical/sources/battery/volts</output>
    </filter>

    <filter>
        <type>gain</type>
        <gain>1</gain>
        <input>
            <expression>
                <table>
                    <property>engines/engine[0]/rpm</property>
                    <entry>
                        <ind>200</ind><dep>0</dep>
                    </entry>
                    <entry>
                        <ind>500</ind><dep>24</dep>
                    </entry>
                    <entry>
                        <ind>2000</ind><dep>28</dep>
                    </entry>
                    <entry>
                        <ind>5000</ind><dep>30</dep>
                    </entry>
                </table>
            </expression>
        </input>
        <output>systems/electrical/sources/generator[0]/volts</output>
    </filter>

    <filter>
        <type>gain</type>
        <gain>1</gain>
        <input>
            <expression>
                <table>
                    <property>engines/engine[1]/rpm</property>
                    <entry>
                        <ind>200</ind><dep>0</dep>
                    </entry>
                    <entry>
                        <ind>500</ind><dep>24</dep>
                    </entry>
                    <entry>
                        <ind>2000</ind><dep>28</dep>
                    </entry>
                    <entry>
                        <ind>5000</ind><dep>30</dep>
                    </entry>
                </table>
            </expression>
        </input>
        <output>systems/electrical/sources/generator[1]/volts</output>
    </filter>

    <!-- buses -->
    <filter>
        <type>gain</type>
        <gain>1</gain>
        <input>
            <condition>
                <or>
                    <greater-than>
                        <property>systems/electrical/sources/generator[0]/volts</property>
                        <value>23</value>
                    </greater-than>
                    <less-than>
                        <property>systems/electrical/sources/battery/volts</property>
                        <value>23</value>
                    </less-than>
                </or>
            </condition>
            <value>1</value>
        </input>
        <input>
            <value>0</value>
        </input>
        <output>systems/electrical/buses/bus[0]/feed</output>
    </filter>
    <filter>
        <type>gain</type>
        <gain>1</gain>
        <input>
            <condition>
                <equals>
                    <property>systems/electrical/buses/bus[0]/feed</property>
                    <value>1</value>
                </equals>
            </condition>
            <property>systems/electrical/sources/generator[0]/volts</property>
        </input>
        <input>
            <property>systems/electrical/sources/battery/volts</property>
        </input>
        <output>systems/electrical/buses/bus[0]/volts</output>
    </filter>

    <filter>
        <type>gain</type>
        <gain>1</gain>
        <input>
            <condition>
                <or>
                    <greater-than>
                        <property>systems/electrical/sources/generator[1]/volts</property>
                        <value>23</value>
                    </greater-than>
                    <less-than>
                        <property>systems/electrical/sources/battery/volts</property>
                        <value>23</value>
                    </less-than>
                </or>
            </condition>
            <value>1</value>
        </input>
        <input>
            <value>0</value>
        </input>
        <output>systems/electrical/buses/bus[1]/feed</output>
    </filter>
    <filter>
        <type>gain</type>
        <gain>1</gain>
        <input>
            <condition>
                <equals>
                    <property>systems/electrical/buses/bus[1]/feed</property>
                    <value>1</value>
                </equals>
            </condition>
            <property>systems/electrical/sources/generator[1]/volts</property>
        </input>
        <input>
            <property>systems/electrical/sources/battery/volts</property>
        </input>
        <output>systems/electrical/buses/bus[1]/volts</output>
    </filter>

    <!-- outputs -->

    <!-- unswitched -->
    <filter>
        <type>gain</type>
        <gain>1</gain>
        <input>
            <property>systems/electrical/buses/bus[0]/volts</property>
        </input>
        <output>systems/electrical/outputs/adf</output>
        <output>systems/electrical/outputs/gps</output>
        <output>systems/electrical/outputs/turn-coordinator</output>
        <output>systems/electrical/outputs/mk-viii</output>
        <output>systems/electrical/outputs/comm[0]</output>
        <output>systems/electrical/outputs/nav[0]</output>
        <output>systems/electrical/outputs/fuel-pump[0]</output>
    </filter>
    <filter>
        <type>gain</type>
        <gain>1</gain>
        <input>
            <property>systems/electrical/buses/bus[1]/volts</property>
        </input>
        <output>systems/electrical/outputs/autopilot</output>
        <output>systems/electrical/outputs/dme</output>
        <output>systems/electrical/outputs/transponder</output>
        <output>systems/electrical/outputs/comm[1]</output>
        <output>systems/electrical/outputs/nav[1]</output>
        <output>systems/electrical/outputs/fuel-pump[1]</output>
    </filter>

    <!-- engine starters & mesh -->
    <!-- TODO -->

    <!-- lights -->
    <filter>
        <type>gain</type>
        <gain>0.04</gain>
        <input>
            <condition>
                <property>controls/lighting/landing-lights[0]</property>
            </condition>
            <property>systems/electrical/buses/bus[0]/volts</property>
        </input>
        <output>systems/electrical/outputs/landing-lights[0]</output>
    </filter>
    <filter>
        <type>gain</type>
        <gain>0.04</gain>
        <input>
            <condition>
                <property>controls/lighting/landing-lights[1]</property>
            </condition>
            <property>systems/electrical/buses/bus[1]/volts</property>
        </input>
        <output>systems/electrical/outputs/landing-lights[1]</output>
    </filter>

    <filter>
        <type>gain</type>
        <gain>0.04</gain>
        <input>
            <condition>
                <property>controls/lighting/running-lights</property>
            </condition>
            <property>systems/electrical/buses/bus[0]/volts</property>
        </input>
        <output>systems/electrical/outputs/running-lights[0]</output>
    </filter>
    <filter>
        <type>gain</type>
        <gain>0.04</gain>
        <input>
            <condition>
                <property>controls/lighting/running-lights</property>
            </condition>
            <property>systems/electrical/buses/bus[1]/volts</property>
        </input>
        <output>systems/electrical/outputs/running-lights[1]</output>
    </filter>
    <filter>
        <type>gain</type>
        <gain>0.04</gain>
        <input>
            <condition>
                <property>controls/lighting/passing-lights</property>
            </condition>
            <property>systems/electrical/buses/bus[0]/volts</property>
        </input>
        <output>systems/electrical/outputs/passing-lights</output>
    </filter>

    <filter>
        <type>gain</type>
        <gain>0.04</gain>
        <input>
            <condition>
                <property>controls/lighting/tail-lights</property>
            </condition>
            <property>systems/electrical/buses/bus[0]/volts</property>
        </input>
        <output>systems/electrical/outputs/tail-lights[0]</output>
    </filter>
    <filter>
        <type>gain</type>
        <gain>0.04</gain>
        <input>
            <condition>
                <property>controls/lighting/tail-lights</property>
            </condition>
            <property>systems/electrical/buses/bus[1]/volts</property>
        </input>
        <output>systems/electrical/outputs/tail-lights[1]</output>
    </filter>

    <filter>
        <type>gain</type>
        <gain>0.04</gain>
        <input>
            <condition>
                <property>controls/lighting/recognition-lights</property>
            </condition>
            <property>systems/electrical/buses/bus[0]/volts</property>
        </input>
        <output>systems/electrical/outputs/recognition-lights[0]</output>
    </filter>
    <filter>
        <type>gain</type>
        <gain>0.04</gain>
        <input>
            <condition>
                <property>controls/lighting/recognition-lights</property>
            </condition>
            <property>systems/electrical/buses/bus[1]/volts</property>
        </input>
        <output>systems/electrical/outputs/recognition-lights[1]</output>
        <output>systems/electrical/outputs/recognition-lights[2]</output>
    </filter>

    <filter>
        <type>gain</type>
        <gain>0.04</gain>
        <input>
            <condition>
                <property>controls/lighting/formation-lights</property>
            </condition>
            <property>systems/electrical/buses/bus[0]/volts</property>
        </input>
        <output>systems/electrical/outputs/formation-lights[0]</output>
        <output>systems/electrical/outputs/formation-lights[2]</output>
    </filter>
    <filter>
        <type>gain</type>
        <gain>0.04</gain>
        <input>
            <condition>
                <property>controls/lighting/formation-lights</property>
            </condition>
            <property>systems/electrical/buses/bus[1]/volts</property>
        </input>
        <output>systems/electrical/outputs/formation-lights[1]</output>
    </filter>


    <filter>
        <type>gain</type>
        <gain>0.04</gain>
        <input>
            <expression>
                <product>
                    <property>controls/lighting/instruments-norm</property>
                    <property>systems/electrical/buses/bus[0]/volts</property>
                </product>
            </expression>
        </input>
        <output>systems/electrical/outputs/instrument-lights</output>
    </filter>

    <filter>
        <type>gain</type>
        <gain>0.04</gain>
        <input>
            <expression>
                <product>
                    <property>controls/lighting/compass-lights</property>
                    <property>systems/electrical/buses/bus[1]/volts</property>
                </product>
            </expression>
        </input>
        <output>systems/electrical/outputs/compass-lights</output>
    </filter>

</PropertyList>
